<%= simple_form_for [@coach] do |f| %>
  <div class="card bg-secondary shadow">
    <div class="card-header bg-white border-0">
      <div class="row align-items-center">
        <div class="col-8 card-header-title">
            Coach <%= @coach.name %>
        </div>
        <div class="col-4 text-right">
          <a href="#" class="btn btn-sm btn-primary">Mettre à jour</a>
        </div>
      </div>
    </div>
    <div class="card-body">
    <span class="label-info">Informations sur le coach</span>
      <div class="pl-lg-4 mt-4 mb-4">
        <div class="row">
          <div class="col-sm-12 col-md-6">
            <%= f.input :name, placeholder: "title", input_html: { autocomplete: "title", class: "form-control-alternative" } %>
          </div>
          <div class="col-sm-12 col-md-6">
            <%= f.input :specialisation, placeholder: "Subtitle", input_html: { autocomplete: "subtitle", class: "form-control-alternative" } %>
          </div>
        </div>
        <span class="label-info ml-n3">Modifier la photo du coach</span>
        <div class="mt-4 mb-4">
          <div class="mt-4 mb-4">
            <div class="file-drop-area">
              <span class="fake-btn">Select. fichier</span>
              <span class="file-msg">ou glisser et déposer vos photos</span>
              <%= f.input :picture, type: :file, multiple: true, wrapper: false, input_html: { class: "file-input" }, label: false %>
            </div>
          </div>
        </div>
        <%= f.submit "Mettre à jour", class: "btn btn-success" %>
      </div>
    </div>
  </div>
<% end %>

<script>
  var $fileInput = $('.file-input');
  var $droparea = $('.file-drop-area');

  // highlight drag area
  $fileInput.on('dragenter focus click', function() {
    $droparea.addClass('is-active');
  });

  // back to normal state
  $fileInput.on('dragleave blur drop', function() {
    $droparea.removeClass('is-active');
  });

  // change inner text
  $fileInput.on('change', function() {
    var filesCount = $(this)[0].files.length;
    var $textContainer = $(this).prev();

    if (filesCount === 1) {
      // if single file is selected, show file name
      var fileName = $(this).val().split('\\').pop();
      $textContainer.text(fileName);
    } else {
      // otherwise show number of files
      $textContainer.text(filesCount + ' fichiers sélectionnées');
    }
  });
</script>

